/**
 *  - 
 * @version v1.4.4
 * @link https://www.dengro.com
 * @license MIT
 * @copyright 2019 
 */
function onloadCallback(){window.dengro.recaptchaCallback()}!function(){if("function"==typeof window.CustomEvent)return;window.CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};var o=document.createEvent("CustomEvent");return o.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),o}}();var DenGro=function(){"use strict";function a(e){this.version="1.4.4",this.debug=!0===e,this.gaPropertyId=!0===this.debug?"UA-XXXXXXX-X":null,this.gaTrackerName="dengro",this.gaEventConfig={formSubmission:{category:"FORM",action:"CAPTURE",label:"SUCCESS",value:1}},this.campaignKeys=["affiliate","gclid","utm_source","utm_campaign","utm_content","utm_term","utm_medium"],this.impressionData={referrer:null,landing_url:null,capture_url:null},this.defaultAffiliate="PRACTICE",this.campaignDataSource=window.self!==window.top?"":window.location.search,this.attributionData="",this.cookieNameSpace="dengro-",this.gaLibrarySource="https://www.google-analytics.com/analytics.js",this.recaptchaLibrarySource='https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit"',this.recaptchaForms=[],this.formIds=[],this.formNodes=[],this.app="https://app.dengro.com",this.hostedDomain="https://pages.mydengro.com",this.cdn="https://capture.dengro.com",this.locale="en-GB"}return Element.prototype.closest=function(e){var t,o=(this.document||this.ownerDocument).querySelectorAll(e),n=this;do{for(t=o.length;0<=--t&&o.item(t)!==n;);}while(t<0&&(n=n.parentElement));return n},a.prototype.getCookie=function(e){var t=this.cookieNameSpace+e+"=",o=document.cookie.split(";"),n=0,r=o.length,a=null;for(n=0;n<r;n+=1){for(a=o[n];" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(t))return a.substring(t.length,a.length)}return null},a.prototype.getRequestData=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(this.campaignDataSource);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},a.prototype.getAffiliate=function(e){var t=e.querySelector('[name="affiliate"]'),o=this.getCookie("affiliate");return o||(t&&t.value?t.value:this.defaultAffiliate)},a.prototype.setCookie=function(e,t,o){var n="",r=new Date;o&&(r.setTime(r.getTime()+24*o*60*60*1e3),n="; expires="+r.toGMTString()),document.cookie=this.cookieNameSpace+e+"="+t+n+"; path=/"},a.prototype.setCookies=function(){var e=0,t=this.campaignKeys.length,o=null,n=null;for(e=0;e<t;e+=1)o=this.campaignKeys[e],(n=this.getRequestData(o))&&this.setCookie(o,n,365);this.setReferrerCookie(this.impressionData.referrer),this.setLandingUrlCookie(this.impressionData.landing_url)},a.prototype.setReferrerCookie=function(e){e&&this.setCookie("referrer",e,30)},a.prototype.setLandingUrlCookie=function(e){e&&this.setCookie("landing_url",e,30)},a.prototype.setCustomRequest=function(e){var t,o,n=e.querySelectorAll("[data-dengro-custom-request]"),r=[],a=e.querySelectorAll('[name="special_request"]'),i=0,s=n.length;if(0!==n.length&&0!==a.length){for(i=0;i<s;i+=1)t=n[i],o=t.getAttribute("type"),!1!==(d=t,"text"===o&&""!==d.value?d.value:("radio"===o||"checkbox"===o)&&null!==d.getAttribute("checked")&&d.value)&&r.push("Custom request ("+t.name+"): "+t.value+".");var d;a[0].value=a[0].value?a[0].value+". "+r.join(" "):r.join(" ")}},a.prototype.setImpressionData=function(){var e=window.self!==window.top;this.impressionData.referrer=e?"":this.getReferrer(),this.impressionData.landing_url=e?"":this.getLandingUrl(),this.impressionData.capture_url=window.location.href},a.prototype.getReferrer=function(){var e=window.document.referrer;return-1===e.indexOf(location.protocol+"//"+location.host)&&""!==e?e:this.getCookie("referrer")?this.getCookie("referrer"):""},a.prototype.getLandingUrl=function(){return this.getCookie("landing_url")?this.getCookie("landing_url"):window.location.href},a.prototype.setAttributionFieldValue=function(e){var t=e.querySelectorAll('[name="attribution"], [value="__dengro-attribution__"], [placeholder="__dengro-attribution__"]'),o=0,n=t.length;if(n)for(o=0;o<n;o+=1)t[o].value=this.attributionData;else{var r=document.createElement("input");r.type="hidden",r.name="attribution",r.value=this.attributionData,e.appendChild(r)}},a.prototype.setAttributionData=function(e){this.attributionData="";var t=0,o=this.campaignKeys.length,n=null,r=null;for(t=0;t<o;t+=1)n=this.campaignKeys[t],r=this.getCookie(n)||"","affiliate"===n&&(r=this.getAffiliate(e)),this.attributionData+=n+"="+r+"|";for(n in this.impressionData)this.impressionData.hasOwnProperty(n)&&(this.attributionData+=n+"="+this.impressionData[n]+"|");this.attributionData=this.attributionData.substring(0,this.attributionData.length-1),this.setAttributionFieldValue(e)},a.prototype.formSubmitHandler=function(e){window.ga&&this.trackEvent(this.gaEventConfig.formSubmission)},a.prototype.appendStyles=function(){var e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href=this.cdn+"/dengro.min.css",e.media="all",document.getElementsByTagName("head")[0].appendChild(e)},a.prototype.prepareFormLoader=function(e){var t=document.createElement("div");t.className="dengro-loader",t.appendChild(document.createElement("span")),t.appendChild(document.createElement("span")),t.appendChild(document.createElement("span")),e.appendChild(t)},a.prototype.fetchFormData=function(){var e=document.createElement("script");e.async=1,e.src=this.app+"/forms?callback=window.dengro.renderForms&q="+this.formIds.join(",")+"&locale="+this.locale,e.onerror=this.formLoadErrorHandler,document.body.insertBefore(e,document.body.firstChild)},a.prototype.log=function(e,t){"object"==typeof console&&console.hasOwnProperty(e)&&console[e](t)},a.prototype.formLoadErrorHandler=function(e){for(var t="\n\nDenGro Error:\n---------------\nFailed to load forms from DenGro \n"+e.currentTarget.src+"\nSee https://www.dengro.com for help.\n\n\n",o=document.querySelectorAll("[data-dengro-form]"),n=0,r=o.length;n<r;n+=1)a.prototype.appendHtml(o[n],"<p>The form failed to load. Please try again later.</p>");a.prototype.log("error",t)},a.prototype.renderForms=function(e){for(var t=0,o=this.formNodes.length;t<o;t+=1){var n=this.formNodes[t];if(e.hasOwnProperty("forms")){var r=this.getFormInResponse(e,n.dataset.dengroForm);if(void 0!==r){this.appendHtml(n,r.html);var a=n.querySelector("form"),i=a.querySelectorAll('input[type="checkbox"]'),s=a.querySelector("[data-recaptcha]"),d=a.querySelector('button[type="submit"]'),l=d.getAttribute("id")+"-"+t;d.setAttribute("id",l);for(var c=0,u=i.length;c<u;c+=1){var p=i[c].getAttribute("id")+"-"+Math.ceil(1e5*Math.random());i[c].parentElement.setAttribute("for",p),i[c].setAttribute("id",p)}if(null!==n.querySelector("[data-recaptcha]")){var m=s.getAttribute("id")+"-"+t;s.setAttribute("id",m),this.recaptchaForms.push({recaptchaId:m,submitButton:d})}}else this.appendHtml(n,this.renderError(e,n))}else this.log("warn",'Expected "forms" in response'),this.appendHtml(n,"<p>An error has occured please try again.</p>")}this.initForms()},a.prototype.initRecaptcha=function(){if(0<this.recaptchaForms.length&&"object"!==window.recaptcha){var e=document.createElement("script");e.src=this.recaptchaLibrarySource,e.async=1,document.body.insertBefore(e,document.body.firstChild)}},a.prototype.recaptchaCallback=function(){this.recaptchaForms.map(function(e){var t=document.querySelector("#"+e.recaptchaId);grecaptcha.render(e.submitButton,{sitekey:t.getAttribute("data-recaptcha-site-key"),isolated:!0,badge:t.getAttribute("data-recaptcha-badge"),callback:function(e){t.closest("form").submit()}})})},a.prototype.getFormInResponse=function(e,t){return e.forms.filter(function(e){return e.uuid===t})[0]},a.prototype.appendHtml=function(e,t){e.innerHTML=t},a.prototype.renderError=function(e,t){return this.log("warn","The DenGro form with the uuid: "+t.dataset.dengroForm+" could not be loaded"),"undefined"!==t.dataset.dengroFallbackTelephone&&"undefined"!==t.dataset.dengroFallbackEmail&&"undefined"!==t.dataset.dengroFallbackModel?e.fallbackText.replace("{telephone}",t.dataset.dengroFallbackTelephone).replace("{email}",t.dataset.dengroFallbackEmail).replace("{model}",t.dataset.dengroFallbackModel):"The form failed to load."},a.prototype.loadForms=function(){if(this.formNodes=document.querySelectorAll("[data-dengro-form]"),0!==this.formNodes.length){for(var e=0,t=this.formNodes.length;e<t;e+=1){var o=this.formNodes[e].dataset.dengroForm;this.formIds.push(o),this.prepareFormLoader(this.formNodes[e])}this.fetchFormData()}},a.prototype.initForms=function(){function e(){r.setCustomRequest.apply(r,[this]),r.formSubmitHandler.apply(r,arguments)}var t=0,o=document.querySelectorAll("[data-dengro]").length?document.querySelectorAll("[data-dengro]"):document.querySelectorAll("[data-dengro-hosted]"),n=o.length,r=this;for(t=0;t<n;t+=1)this.setAttributionData(o[t]),o[t].addEventListener("submit",e),o[t].removeAttribute("data-dengro"),o[t].setAttribute("data-dengro-prepared","");this.initRecaptcha()},a.prototype.trackHit=function(e,t,o){"create"!==e&&(e=this.gaTrackerName+"."+e),(o=void 0===o?[]:o).unshift(e,t),window.ga.apply(window,o)},a.prototype.trackEvent=function(e){this.trackHit("send","event",[e.category,e.action,e.label,e.value])},a.prototype.init=function(){this.setImpressionData(),this.setCookies(),this.prepareContactForm7(),this.prepareAnonymousForms(),this.appendStyles(),this.loadForms(),this.initForms(),this.initHosted(),document.addEventListener("nfFormReady",this.initForms)},a.prototype.reportError=function(e){"object"==typeof window.console&&window.console.hasOwnProperty("warn")&&this.log("warn","\n\nDenGro Error:\n---------------\n"+e+"\nPlease contact support@dengro.com for help.\n\n\n")},a.prototype.prepareContactForm7=function(){var e=document.querySelectorAll("form input[name=dengro]");e.length&&e[0].closest("form").setAttribute("data-dengro","")},a.prototype.prepareAnonymousForms=function(){var e=0,t=document.querySelectorAll('form [name="attribution"], form [value="__dengro-attribution__"], form [placeholder="__dengro-attribution__"]'),o=t.length;for(e=0;e<o;e+=1)t[e].closest("form").setAttribute("data-dengro","")},a.prototype.load=function(){if(null!==this.gaPropertyId){var e,t,o,n,r,a,i=this;"function"!=typeof window.ga&&(e=window,t=document,o=this.gaLibrarySource,n="ga",e.GoogleAnalyticsObject=n,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,r=t.createElement("script"),a=t.getElementsByTagName("script")[0],r.async=1,r.src=o,r.onerror=function(){i.reportError("Failed to load Google Analytics library from\n"+r.src)},a.parentNode.insertBefore(r,a)),this.trackHit("create",this.gaPropertyId,["auto",this.gaTrackerName]),window.ga(function(){void 0===window.ga.getByName(i.gaTrackerName)?i.reportError("No tracker found."):(i.init(),i.trackHit("send","pageview"))})}else this.init()},a.prototype.initHosted=function(){var e=document.querySelectorAll("[data-dengro-hosted]");if(0!==e.length)for(var t=0,o=e.length;t<o;t++){var n=e[t].dataset.hasOwnProperty("dengroWidgetPlacement")?e[t].dataset.dengroWidgetPlacement:"bottomright",r=e[t].dataset.hasOwnProperty("dengroWidgetColor")?e[t].dataset.dengroWidgetColor:"rgb(0, 133, 215)";switch(e[t].dataset.hasOwnProperty("dengroType")?e[t].dataset.dengroType:"form"){case"form":this.createHostedForm(e[t].dataset.dengroHosted,e[t]);break;case"widget":this.initWidget(e[t].dataset.dengroHosted,n,r)}}},a.prototype.initWidget=function(e,t,o){var n=this.makeContainerElement(e),r=this.makeModalContainerElement(e),a=this.makeWidgetElement(e,r,t,o),i=r.querySelector(".dengro-modal").querySelector(".dengro-modal-content");document.body.insertBefore(n,document.body.lastChild),n.appendChild(r),n.appendChild(a),this.addModalListeners(r,a),this.createHostedForm(e,i)},a.prototype.makeContainerElement=function(e){var t=document.createElement("div");return t.id="dengro-container-"+e,t.className="dengro-namespace",t},a.prototype.makeChatIconElement=function(){var e=document.createElement("img");return e.src=this.cdn+"/images/chat-white.svg",e.className="dengro-chat-icon",e.alt="Open",e},a.prototype.makeCloseIconElement=function(){var e=document.createElement("img");return e.src=this.cdn+"/images/close-black.svg",e.className="dengro-close-icon",e.alt="Close",e},a.prototype.makeWidgetElement=function(e,t,o,n){var r=document.createElement("div"),a=document.createElement("div"),i=this.makeChatIconElement();switch(r.id="dengro-widget-"+e,a.id="dengro-widget-button-"+e,a.className="dengro-widget-button",a.style.backgroundColor=n,a.style.position="fixed",a.setAttribute("role","button"),o){case"bottomright":a.style.bottom="20px",a.style.right="20px";break;case"bottomleft":a.style.bottom="20px",a.style.left="20px";break;default:a.style.bottom="20px",a.style.right="20px"}return a.appendChild(i),r.appendChild(a),r},a.prototype.makeModalContainerElement=function(e){var t=document.createElement("div"),o=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div"),a=document.createElement("div"),i=this.makeCloseIconElement();return t.className="dengro-modal-container",t.style.display="none",o.className="dengro-modal-overlay",n.className="dengro-modal",r.className="dengro-modal-content",a.className="dengro-modal-close-button",n.setAttribute("role","alertdialog"),n.setAttribute("aria-modal","true"),a.appendChild(i),n.appendChild(a),n.appendChild(r),t.appendChild(o),t.appendChild(n),t},a.prototype.addModalListeners=function(t,e){var o=t.querySelector(".dengro-modal"),n=t.querySelector(".dengro-modal-overlay");o.querySelector(".dengro-modal-close-button").onclick=function(){this.closeModal(t)}.bind(this),document.addEventListener("keydown",function(e){"Escape"===e.key&&this.closeModal(t)}.bind(this)),window.addEventListener("esc-key",function(){this.closeModal(t)}.bind(this)),e.addEventListener("mousedown",function(){var t=document.activeElement;window.addEventListener("dengro-modal-closed",function(e){t.focus()}.bind(this))}),e.addEventListener("click",function(){switch(t.style.display){case"none":this.openModal(t);break;case"flex":this.closeModal(t)}}.bind(this)),window.addEventListener("click",function(e){e.target===n&&this.closeModal(t)}.bind(this)),t.addEventListener("success",function(e){setTimeout(function(){this.closeModal(t)}.bind(this),3e3)}.bind(this),!1),t.addEventListener("error",function(e){}.bind(this),!1)},a.prototype.openModal=function(e){e.classList.remove("dengro-modal-out"),e.style.display="flex"},a.prototype.closeModal=function(e){var t=this.createNewEvent("dengro-modal-closed");e.classList.add("dengro-modal-out"),setTimeout(function(){e.style.display="none"},500),dispatchEvent(t)},a.prototype.createHostedForm=function(e,t){var o=document.createElement("iframe");o.id="dengro-hosted-"+e,o.style.margin="0",o.style.width="100%",o.style.height="400px",o.style.border="0 none",o.frameBorder="0",o.src=this.hostedDomain+"/forms/"+e,t.appendChild(o),this.addListenersToHostedForm(o,t),t.addEventListener("dengro.success",function(e){e.detail.hasOwnProperty("success_url")&&e.detail.success_url&&(window.location.href=e.detail.success_url)})},a.prototype.addListenersToHostedForm=function(n,r){var a=null,e=n.addEventListener?"addEventListener":"attachEvent";(0,n[e])("attachEvent"===e?"onmessage":"message",function(e){if("affiliate"===e.data.key&&(a=e.data.value,n.contentWindow.postMessage({key:"attribution",value:this.getAttributionString(a)},"*")),"resize"===e.data.key&&(document.getElementById(n.id).style.height=e.data.value+"px"),"success"===e.data.key&&void 0!==r){var t=new CustomEvent("dengro.success",{detail:e.data.value});r.dispatchEvent(t)}if("error"===e.data.key&&void 0!==r){var o=new CustomEvent("dengro.error",{detail:e.data.value});r.dispatchEvent(o)}}.bind(this),!1),n.addEventListener("load",function(){n.contentWindow.postMessage({key:"attribution",value:this.getAttributionString(a)},"*");var e=new CustomEvent("dengro.form.loaded",{detail:{form:n}});r.dispatchEvent(e)}.bind(this))},a.prototype.createNewEvent=function(e){var t;return"function"==typeof Event?t=new Event(e,{bubbles:!0}):(t=document.createEvent("Event")).initEvent(e,!0,!0),t},a.prototype.getAttributionString=function(e){var t="",o=0,n=this.campaignKeys.length,r=null,a=null;for(o=0;o<n;o+=1)r=this.campaignKeys[o],a=this.getCookie(r)||"","affiliate"===r&&(a=this.getHostedAffiliate(e)),t+=r+"="+a+"|";for(r in this.impressionData)this.impressionData.hasOwnProperty(r)&&(t+=r+"="+this.impressionData[r]+"|");return t},a.prototype.getHostedAffiliate=function(e){return this.getCookie("affiliate")?this.getCookie("affiliate"):e||this.defaultAffiliate},a}();